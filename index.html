<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å‹‰å¼·æ™‚é–“ç®¡ç†ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>
<style>
body {
  font-family: sans-serif;
  background: #f5f5f5;
  padding: 20px;
}
h1 {
  text-align: center;
}
.calendar {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 5px;
  margin-top: 20px;
}
.day {
  background: white;
  border: 1px solid #ccc;
  min-height: 100px;
  padding: 5px;
  font-size: 12px;
}
.day strong {
  display: block;
}
input, button {
  margin: 5px 0;
}
</style>
</head>

<body>
<h1>ğŸ“š å‹‰å¼·æ™‚é–“ç®¡ç†</h1>

<label>æ—¥ä»˜:
  <input type="date" id="date">
</label><br>

<label>æ•™ç§‘:
  <input type="text" id="subject">
</label><br>

<label>å‹‰å¼·æ™‚é–“ï¼ˆåˆ†ï¼‰:
  <input type="number" id="minutes">
</label><br>

<button onclick="saveStudy()">ä¿å­˜</button>

<hr>

<h3>â° ã‚¢ãƒ©ãƒ¼ãƒ è¨­å®š</h3>
<input type="time" id="alarmTime">
<button onclick="setAlarm()">ã‚¢ãƒ©ãƒ¼ãƒ ã‚»ãƒƒãƒˆ</button>

<div class="calendar" id="calendar"></div>

<audio id="canon" src="canon.mp3"></audio>

<script>
const calendar = document.getElementById("calendar");
const studyData = JSON.parse(localStorage.getItem("studyData") || "{}");

function renderCalendar() {
  calendar.innerHTML = "";
  for (const date in studyData) {
    const div = document.createElement("div");
    div.className = "day";
    div.innerHTML = `<strong>${date}</strong>` +
      studyData[date].map(d =>
        `${d.subject}ï¼š${d.minutes}åˆ†`
      ).join("<br>");
    calendar.appendChild(div);
  }
}

function saveStudy() {
  const date = document.getElementById("date").value;
  const subject = document.getElementById("subject").value;
  const minutes = document.getElementById("minutes").value;

  if (!date || !subject || !minutes) return alert("å…¨éƒ¨å…¥åŠ›ã—ã¦ã­");

  if (!studyData[date]) studyData[date] = [];
  studyData[date].push({ subject, minutes });

  localStorage.setItem("studyData", JSON.stringify(studyData));
  renderCalendar();
}

function setAlarm() {
  const alarmTime = document.getElementById("alarmTime").value;
  if (!alarmTime) return;

  const [h, m] = alarmTime.split(":").map(Number);

  setInterval(() => {
    const now = new Date();
    if (now.getHours() === h && now.getMinutes() === m) {
      document.getElementById("canon").play();
    }
  }, 1000);
}

renderCalendar();
</script>
</body>
</html>
